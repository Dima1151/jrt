### Space
taskKey="com.javarush.task.task25.task2515.big06"
***

#### Space (14)

Теперь напиши класс Ufo.
Он чуть сложнее класса Bomb и проще SpaceShip.
Тебе понадобятся методы draw(), move(), fire().
Также не забудь о конструкторе. Типы параметров double, а радиус ufo будет равен 3.

Метод draw() сделай по аналогии с SpaceShip. Рисовать UFO будем символом ‘U‘.
И добавь матрицу, по аналогии с SpaceShip.

Метод move() надо сделать так:
* корабль перемещается по случайной траектории;

>Подсказка:
>```
>double dx = Math.random() * 2 — 1; //-1..1
>double dy = Math.random() * 2 — 1; //-1..1
>```

*   корабль не опускается в нижнюю половину экрана;
    ```
    y <= height/2
    ```
*   С вероятностью 10% корабль должен стрелять — вызывать метод fire.

Метод fire():
* Корабль сбрасывает одну бомбу по середине.
* Сделать аналогично классу SpaceShip.
***


#### Space (13)

Теперь перейдем к методам draw, move.
В методе move() надо:
* увеличить x на dx;
* проверить, не вылез ли корабль за границы космоса [0, Space.game.getWidth()]. Используй метод checkBorders.
Учти, что ширина корабля равна двум его радиусам.

Метод draw я напишу сам — просто объяви пустой метод.

Еще нам понадобится метод fire(), ведь корабль умеет стрелять.
Этот метод вызывается, когда надо произвести выстрел.

В этом методе надо:
* создать две ракеты;
* установить им координаты левого края корабля и правого края корабля (пушки находятся на расстоянии 2 от центра корабля);
* добавить эти ракеты в список ракет объекта game.

Его можно получить так:
Space.game.getRockets()
***


#### Space (12)

Теперь займемся кораблем.
Для сложности сделаем так: если пользователь нажал кнопку влево, то корабль начинает все время двигаться влево.
Если нажал кнопку вправо — все время в право до упора.
Поэтому заведем специальную переменную dx, которая будет хранить направление движения корабля.
- если dx = 1, корабль каждый ход идет на 1 вправо,
- если dx = -1, корабль каждый ход идет на 1 влево.

Надо:
*   добавь конструктор, можно такой:
    Радиус корабля будет равен 3. Корабль большой — это вам не ракета и не бомба.
    ```java
    public SpaceShip(int x, int y)
    {
    super(x, y, 3);
    }
    ```
    
*   добавь в класс SpaceShip переменную dx (double, по умолчанию равна 0);
*   метод moveLeft(), устанавливает dx равной -1;
*   метод moveRight(), устанавливает dx равной 1.
***


#### Space (11)

Теперь напишем класс Rocket.
Практически совпадает с классом Bomb.
Только:
* Ракета летит вверх (т.е. y уменьшается на 1);
* Рисуем не букву «B«, а букву «R«.
***


#### Space (10)

Теперь напишем класс Bomb. Тут все просто.
Bomb унаследован от BaseObject.

Надо:
*   изменить конструктор:
    Конструктор Bomb должен выглядеть примерно так:
    ```java
    public Bomb(double x, double y)
    {
    super(x, y, 1);
    }
    ```

    x и y переданные в конструктор Bomb мы передаем дальше в конструктор BaseObject с помощью super, где так же указываем радиус «бомбы» равный 1.

*   написать метод move():
    тут все просто — бомба падает вниз — просто увеличиваем y на 1.

*   метод draw(Canvas canvas):
    тут тоже не очень сложная логика.
    Давай просто ставить точку с координатами (x,y) и «цветом» B:
    ```java
    canvas.setPoint(x,y,’B’).
    ```

*   Создай в классе Space нашу игру public static Space game.
***


#### Space (9)

Еще Canvas понадобится два метода, напиши их.
1.  метод clear();
    Этот метод будет очищать матрицу, чтобы на ней снова можно было рисовать.
    Например заменить все символы матрицы на пробелы.

2.  метод print();
    Этот метод отрисовывает матрицу на экран.
    Тут уже ты должен сам разобраться: вывести набор символов не так уж и сложно.
    Не забудь добавить пару пустых строк в конце, чтобы матрицы выведенные в разное время не слипались.
***


#### Space (8)

Что мы будем делать с Canvas?
Мы будем рисовать на нем (в его матрице).

Поэтому нам понадобятся два метода:
public void setPoint(double x, double y, char c),
public void drawMatrix(double x, double y, int[][] matrix, char c).

Первый метод — setPoint будет «ставить точку в координатах x,y цветом c«.
В методе надо:
* округлить x и y до целых чисел,
* занести в matrix[y][x] значение с,
* ничего не делать, если x<0 или y<0 или y>matrix.length или x>matrix[0].length.

Второй метод — drawMatrix копирует переданную ему картинку (матрицу) в матрицу Canvas.
И не просто копирует, а начиная с координат x, y.

В методе надо:
* с помощью двух вложенных циклов пройтись по всем ячейкам переданной картинки,
* если значение ячейки matrix[i][j] не равно 0, то покрасить в матрице объекта Canvas точку (x+j, y+i) в цвет c:
setPoint(x+j, y+i, c)
***


#### Space (7)

Теперь займемся классом Canvas.
Он у нас будет содержать матрицу, куда мы будем рисовать.
У матрицы есть ширина и высота.
А еще будем в ней хранить не числа (int), а символы (char).

Надо:
* Добавить в класс две переменные width и height;
* Добавить в класс переменную matrix (char[][]);
* Добавь геттеры для них;
* В конструкторе проинициализируй матрицу.
***


#### Space (6)

Но и это еще не все.
Классу BaseObject нужны еще методы.
Пока это будут пустые методы draw() и move().
Классы-наследники должны будут переопределить их у себя и реализовать необходимую функциональность.

Еще добавь метод die() - объект умирает (isAlive=false)

А еще нам нужно будет определять попала бомба в корабль или ракета в НЛО.
Это будем делать так:
Создадим специальный метод: public boolean isIntersect(BaseObject o)
Он будет определять - "пересеклись" объекты или нет. Если пересеклись - возвращать true, если нет - false.

Т.к. объекты мы условно считаем кругами, то предлагаю такую формулу взаимодействия:
eсли центр круга одного объекта попал в круг другого, то будем считать, что они столкнулись.
Или еще проще:
дистанция_между_объектами < max (радиус_первого_объекта, радиус_второго_объекта).
***


### Space (5)

Теперь перейдем к классу BaseObject.
Я хочу сделать несколько предложений.

Во-первых. Для простоты, считать все объекты у нас в космосе круглыми.
Нет, отрисовывать их мы будем фигурными, как и раньше.
А вот при расчетах их взаимодействия исходить из того, что они круглые.
Так - гораздо проще.

Во-вторых. Пусть координаты объектов и радиус будут вещественными числами.
Это придаст плавность движениям и точность всем вычислениям.
А при отрисовке мы будем их округлять.

Надо:
1.  Добавь в класс BaseObject переменные x(double), y (double), radius (double), геттеры и сеттеры для них.
2.  Добавить логическую переменную isAlive (жив объект или уже нет).
3.  Добавить геттер (isAlive()-метод для isAlive-переменной).
4.  Добавить конструктор BaseObject(double x, double y, double radius).
4.  Проследить, чтобы в конструкторе isAlive устанавливался в true (мертворожденные нам ни к чему).
6.  Надо пройтись по всем классам-наследникам и поправить у них конструкторы.

>Если вы пользуетесь Intellij IDEA - Alt+Insert вам в помощь.
***


#### Space (4)

Чего не хватает классу Space?
Правильно - методов run() и draw().
run управляет всей логикой игры, если ты помнишь.
А draw отвечает за отрисовку очередного "кадра".

А еще нам пригодится метод sleep(int ms).
Создай их.
***


#### Space (3)

Для чего нам нужен класс Space?
Чтобы хранить в себе все объекты и управлять их взаимодействием.
А какие параметры должны у него быть?
width (ширина), height (высота).
А еще?
* ship (космический корабль),
* список для хранения всех НЛО - ufos (ArrayList<Ufo>),
* список для хранения всех ракет - rockets (ArrayList<Rocket>),
* список для хранения всех бомб - bombs (ArrayList<Bomb>).

Задание:
Добавь все эти переменные к классу Space.
Инициализируй коллекции.
И не забудь добавить переменным getter'ы, а для ship еще и setter!

А что должен содержать конструктор?
Достаточно будет width и height.
***


#### Space (2)

У нас будут бомбы и ракеты.
Значит нам нужны классы Bomb(бомба) и Rocket(ракета).
Создай их.

У наших объектов будет много общего.
Они будут перемещаться по космосу и отрисовываться.
Значит у них у всех будут координаты и размер.
А еще методы move() - для перемещения и draw() для отрисовки.

Есть интересное предложение: давай введем один базовый класс для всех объектов.
Пусть это будет класс BaseObject.
А классы Ufo, SpaceShip, Rocket, Bomb от него наследуются.
Создай абстрактный класс BaseObject и добавь его родителем к классам Ufo, SpaceShip, Rocket, Bomb.

Еще нам понадобится класс Canvas.
Он будет ответственным за "отрисовку" объектов.
С его помощью они будут отрисовывать себя.
Вернее даже на нем.
Создай и этот класс.
***


#### Space (1)

Давай напишем новую компьютерную игрушку.
У нас будет космический корабль, который стреляет ракетами в НЛО.
А НЛО в свою очередь сбрасывает на корабль бомбы.
Ну и, конечно, всё дело происходит в космосе.

Нам понадобятся классы: Space(космос), SpaceShip(космический корабль) и Ufo(НЛО).
Создай классы: Space, SpaceShip, Ufo.
Добавь метод main в класс Space.
***